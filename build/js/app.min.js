/* startup-mvp v0.1.0
 * copyright © 2014 Jobsamuel Núñez
 */
!function(){"use strict";angular.module("app",["ui.router","ngAnimate"]).config(["$urlRouterProvider","$stateProvider","$locationProvider",function(a,b,c){b.state("home",{url:"/",views:{main:{templateUrl:"partials/home.html",controller:"appController"}},data:{pageTitle:"Startup"}}).state("register",{url:"/signup",views:{main:{templateUrl:"partials/register.html",controller:"appController"}},data:{pageTitle:"Signup"}}),a.otherwise("/"),c.html5Mode(!0)}]).factory("send",["$http",function(a){var b={};return b.registration=function(b){var c=(new Date).getHours(),d={email:b,t:c};return a.post("http://127.0.0.1:8080/signup",d).success(function(a){return console.log("%c Startup: "+a,"background: #33cc59; color: #fff"),a}).error(function(a){console.log("%c Startup: Signup failed.","background: #fd4e5a; color: #fff");var b={error:a,ip_address:"${keen.ip}",user_agent:"${keen.user_agent}"};client.addEvent("serverError",b)})},b}]).run(["$rootScope","$state",function(a,b){a.$on("$stateChangeSuccess",function(c,d,e,f){if(angular.isDefined(d.data.pageTitle)&&(a.pageTitle=b.current.data.pageTitle),"register"===f.name){var g={backward:!0,ip_address:"${keen.ip}",user_agent:"${keen.user_agent}"};client.addEvent("curious",g)}})}]).controller("appController",["$scope","$state","send",function(a,b,c){a.pattern=/^[A-Za-z0-9._-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/,a.registered=!1;var d={ip_address:"${keen.ip}",user_agent:"${keen.user_agent}"};client.addEvent("visitor",d),a.interested=function(){var a={user_interested:!0,ip_address:"${keen.ip}",user_agent:"${keen.user_agent}"};client.addEvent("interested",a)},a.register=function(b){if(a.input.email.$valid){c.registration(b).then(function(){a.registered=!0});var d={posible_client:!0,ip_address:"${keen.ip}",user_agent:"${keen.user_agent}"};client.addEvent("convinced",d)}else{var e={valid_email:!1,ip_address:"${keen.ip}",user_agent:"${keen.user_agent}"};client.addEvent("wrongEntry",e)}}}])}();